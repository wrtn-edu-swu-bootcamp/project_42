# 아띠 개발 시작 가이드 (초보자용)

> 개발 경험이 많지 않아도 괜찮아요! 차근차근 따라하면 돼요 💙

---

## 🎯 왜 웹앱으로 만들까요?

### 웹앱 장점 (MVP에 완벽해요!)

**① 빠르고 쉬워요**
- 하나의 코드로 모든 기기 지원 (PC, 모바일, 태블릿)
- 앱스토어 심사 필요 없어요 → 바로 배포!
- 수정하면 즉시 반영돼요

**② 비용이 거의 안 들어요**
- Vercel 무료 플랜으로 충분해요
- 앱스토어 등록 비용 필요 없음

**③ 에러가 덜 나요**
- React/Next.js는 검증된 프레임워크예요
- TypeScript가 컴파일 타임에 에러를 잡아줘요
- 커뮤니티가 커서 문제 해결이 빨라요

**④ 나중에 네이티브로 전환 가능**
- React Native로 쉽게 변환 가능
- 코드의 80% 재사용 가능

### 네이티브 앱은 언제 만들까요?

**Phase 2 이후에 고려**
- 사용자 1,000명 이상 확보 후
- 푸시 알림 같은 네이티브 기능 필요할 때
- 앱스토어 노출이 중요해질 때

---

## 🛠️ 기술 스택 (검증된 조합!)

### 추천 스택

| 구분 | 기술 | 왜 이걸 쓰나요? | 난이도 |
|------|------|----------------|--------|
| **프레임워크** | Next.js 14 | React 기반, Vercel 최적화, 학습 자료 풍부 | ⭐⭐ |
| **언어** | TypeScript | 에러를 미리 잡아줘요 | ⭐⭐⭐ |
| **스타일링** | Tailwind CSS | CSS 파일 없이 빠른 스타일링 | ⭐ |
| **UI 컴포넌트** | shadcn/ui | 복사-붙여넣기로 예쁜 UI | ⭐ |
| **AI** | OpenAI API | GPT-3.5-turbo면 충분 | ⭐⭐ |
| **저장소** | localStorage (MVP) | 서버 없이 브라우저에 저장 | ⭐ |
| **배포** | Vercel | 클릭 한 번에 배포 | ⭐ |

**총 개발 난이도**: ⭐⭐ (보통, 튜토리얼 따라하면 충분!)

### 대안 스택 (더 쉬운 버전)

만약 TypeScript가 어렵다면?
- JavaScript로 시작해도 괜찮아요
- 하지만 TypeScript를 강력 추천해요 (에러가 훨씬 적어요)

만약 Tailwind가 어렵다면?
- 일반 CSS 사용해도 돼요
- 하지만 Tailwind가 오히려 더 쉬워요!

---

## 📦 프로젝트 생성 (따라하기)

### Step 1: 개발 환경 준비

**필요한 프로그램** (모두 무료!)

1. **Node.js 설치** (필수)
   - https://nodejs.org 에서 LTS 버전 다운로드
   - 설치 후 확인: `node -v` (v18 이상이면 OK)

2. **코드 에디터** (Cursor 또는 VS Code)
   - 이미 Cursor 쓰고 있으니 OK!

3. **Git 설치** (배포용)
   - https://git-scm.com
   - 설치 후 확인: `git --version`

4. **GitHub 계정** (무료)
   - https://github.com

### Step 2: 프로젝트 생성 (5분)

```bash
# 터미널에서 실행
npx create-next-app@latest atti-app

# 질문이 나오면 이렇게 답하세요:
# ✅ Would you like to use TypeScript? → Yes
# ✅ Would you like to use ESLint? → Yes  
# ✅ Would you like to use Tailwind CSS? → Yes
# ✅ Would you like to use `src/` directory? → No
# ✅ Would you like to use App Router? → Yes
# ❌ Would you like to customize the default import alias? → No

# 프로젝트 폴더로 이동
cd atti-app

# 개발 서버 시작
npm run dev

# 브라우저에서 http://localhost:3000 열기!
```

### Step 3: 필요한 패키지 설치 (3분)

```bash
# OpenAI API (AI 분석용)
npm install openai

# shadcn/ui 초기화 (예쁜 UI 컴포넌트)
npx shadcn-ui@latest init
# 질문에 전부 Enter (기본값 사용)

# 필요한 컴포넌트 설치
npx shadcn-ui@latest add button
npx shadcn-ui@latest add card
npx shadcn-ui@latest add textarea
npx shadcn-ui@latest add badge

# 날짜 처리
npm install date-fns

```

### Step 4: 환경 변수 설정 (2분)

```bash
# 프로젝트 루트에 .env.local 파일 생성
OPENAI_API_KEY=sk-proj-your-api-key-here
```

**OpenAI API 키 받는 법**
1. https://platform.openai.com 접속
2. 회원가입 (신용카드 등록 필요)
3. API Keys 메뉴에서 새 키 생성
4. 무료 크레딧 $5 제공 (테스트용으로 충분!)

---

## 📂 폴더 구조

```
atti-app/
├── app/
│   ├── page.tsx              # 홈 (일기 작성)
│   ├── result/
│   │   └── page.tsx          # 결과 화면
│   ├── history/
│   │   └── page.tsx          # 기록 화면
│   ├── safety/
│   │   └── page.tsx          # 위기 안내
│   ├── api/
│   │   └── analyze/
│   │       └── route.ts      # AI 분석 API
│   ├── layout.tsx            # 전체 레이아웃
│   └── globals.css           # 글로벌 스타일
│
├── components/
│   ├── emotion-badge.tsx     # 감정 배지
│   ├── action-card.tsx       # 액션 카드
│   ├── music-card.tsx        # 음악 추천 카드
│
├── lib/
│   ├── storage.ts            # localStorage 헬퍼
│   ├── prompts.ts            # AI 프롬프트
│   ├── catalogs/
│   │   ├── music.json        # 음악 카탈로그 (30곡)
│   │   └── flowers.json      # 꽃 카탈로그 (15종)
│   └── types.ts              # TypeScript 타입 정의
│
├── public/                   # 이미지, 아이콘
├── .env.local               # 환경 변수 (git에 안 올림!)
├── .gitignore               # git 제외 파일
└── package.json             # 패키지 목록
```

---

## 🎵 음악 추천 구현 (저작권 안전!)

### 음악 카탈로그 만들기

**`lib/catalogs/music.json`**

```json
[
  {
    "id": "calm-comfort-1",
    "artist": "에픽하이",
    "title": "스물다섯, 스물하나",
    "mood": ["슬픔", "위로", "희망"],
    "tempo": "느림",
    "energy": "낮음",
    "lyrics_snippet": "모든 게 괜찮아질 거야, 시간이 지나면",
    "why_recommend": "힘든 시기를 지나온 가사가 깊은 위로를 줘요. 느린 템포가 마음을 진정시켜줘요.",
    "emotional_tone": "따뜻한 위로",
    "best_for": ["우울", "외로움", "낙담"],
    "evidence_id": "music-therapy-depression"
  },
  {
    "id": "calm-comfort-2",
    "artist": "선우정아",
    "title": "도망가자",
    "mood": ["무기력", "피로", "위로"],
    "tempo": "느림",
    "energy": "낮음",
    "lyrics_snippet": "잠깐 쉬어가자 괜찮아, 조금 느려도 돼",
    "why_recommend": "지칠 때 잠깐 멈춰도 괜찮다는 메시지를 전해요. 부드러운 멜로디가 편안함을 줘요.",
    "emotional_tone": "허락과 쉼",
    "best_for": ["무기력", "탈진", "번아웃"],
    "evidence_id": "music-therapy-depression"
  },
  {
    "id": "uplifting-1",
    "artist": "볼빨간사춘기",
    "title": "좋다고 말해",
    "mood": ["기쁨", "설렘", "경쾌"],
    "tempo": "빠름",
    "energy": "높음",
    "lyrics_snippet": "좋다고 말해줘요",
    "why_recommend": "경쾌한 리듬이 기분을 더 밝게 만들어줘요. 긍정적인 가사가 기쁨을 증폭시켜요.",
    "emotional_tone": "밝고 경쾌",
    "best_for": ["기쁨", "만족", "성취감"],
    "evidence_id": "positive-music-mood"
  },
  {
    "id": "calm-anxiety-1",
    "artist": "10cm",
    "title": "Lean On Me",
    "mood": ["불안", "긴장", "진정"],
    "tempo": "중간",
    "energy": "낮음",
    "lyrics_snippet": "(연주곡 - 가사 없음)",
    "why_recommend": "부드럽고 안정적인 멜로디가 불안한 마음을 진정시켜줘요. 가사가 없어서 생각에만 집중할 수 있어요.",
    "emotional_tone": "차분하고 안정적",
    "best_for": ["불안", "초조", "긴장"],
    "evidence_id": "music-anxiety-reduction"
  },
  {
    "id": "energetic-1",
    "artist": "방탄소년단",
    "title": "작은 것들을 위한 시",
    "mood": ["감사", "평온", "만족"],
    "tempo": "중간",
    "energy": "중간",
    "lyrics_snippet": "작은 것들이 내게 전부",
    "why_recommend": "일상의 작은 행복을 느끼게 해주는 가사예요. 따뜻하고 편안한 느낌이 들어요.",
    "emotional_tone": "따뜻하고 감사",
    "best_for": ["만족", "감사", "평온"],
    "evidence_id": "gratitude-music"
  }
]
```

### UI에 보여주는 형식

**음악 추천 카드 예시**

```
┌────────────────────────────────────┐
│  🎵 음악 추천                      │
├────────────────────────────────────┤
│                                    │
│  에픽하이 - "스물다섯, 스물하나"    │
│                                    │
│  💙 왜 이 노래?                    │
│  힘든 시기를 지나온 가사가 깊은     │
│  위로를 줘요. 느린 템포가 마음을   │
│  진정시켜줘요.                     │
│                                    │
│  📝 가사 중에서:                   │
│  "모든 게 괜찮아질 거야,           │
│   시간이 지나면"                   │
│                                    │
│  💡 근거: 음악 치료가 우울 증상    │
│  감소에 효과가 있어요 (연구 링크)  │
│                                    │
│  ※ 유튜브, 멜론, 스포티파이 등에서 │
│  검색해서 들어보세요               │
│                                    │
│  [ 완료! ]  [ 건너뛰기 ]           │
└────────────────────────────────────┘
```

### 저작권 문제 없는 이유

✅ **안전한 것들**
- 가수명, 곡명 언급 → 문제 없음
- 짧은 가사 인용 (1-2줄) → 공정 이용 범위
- "검색해서 들어보세요" 안내 → 권장 사항

❌ **절대 하면 안 되는 것**
- 음원 파일 업로드/재생
- 외부 음원 링크 (YouTube, Spotify API 연동)
- 전체 가사 게재
- 음원 다운로드 기능

---

## 💻 개발 순서 (단계별)

### Phase 1: 환경 설정 (Day 1)

```bash
# 1. 프로젝트 생성
npx create-next-app@latest atti-app
cd atti-app

# 2. 패키지 설치
npm install openai date-fns recharts
npx shadcn-ui@latest init
npx shadcn-ui@latest add button card textarea badge

# 3. 환경 변수 설정
echo "OPENAI_API_KEY=sk-..." > .env.local

# 4. 개발 서버 실행
npm run dev
# http://localhost:3000 확인!
```

### Phase 2: 기본 화면 (Day 2-3)

**만들 파일**
1. `app/page.tsx` - 홈 (일기 작성)
2. `app/result/page.tsx` - 결과 화면
3. `app/history/page.tsx` - 기록 화면
4. `app/safety/page.tsx` - 위기 안내

**핵심 컴포넌트**
1. `components/journal-input.tsx` - 일기 입력 폼
2. `components/emotion-badge.tsx` - 감정 배지
3. `components/action-card.tsx` - 액션 카드

### Phase 3: AI 연동 (Day 4-5)

**1. API Route 만들기**

`app/api/analyze/route.ts`
```typescript
import OpenAI from 'openai'
import { NextResponse } from 'next/server'

const openai = new OpenAI({
  apiKey: process.env.OPENAI_API_KEY
})

export async function POST(req: Request) {
  try {
    const { text } = await req.json()
    
    // 입력 검증
    if (!text || text.trim().length < 10) {
      return NextResponse.json(
        { error: '조금 더 자세히 써주세요 (최소 10자)' },
        { status: 400 }
      )
    }
    
    // AI 분석
    const completion = await openai.chat.completions.create({
      model: "gpt-3.5-turbo",
      messages: [
        {
          role: "system",
          content: `당신은 "아띠"라는 감정 일기 앱의 AI입니다.
심리상담학 이론(CBT, Rogers, Maslow)을 기반으로 분석하세요.
130개 감정 라벨 중 3~5개를 선택하고, 강도(0-1)를 매기세요.
출력 형식: JSON { emotions: [], summary: "", needs: "", actions: [], risk: "low/medium/high" }`
        },
        {
          role: "user",
          content: text
        }
      ],
      temperature: 0.7,
      max_tokens: 1000
    })
    
    const result = JSON.parse(completion.choices[0].message.content || '{}')
    
    return NextResponse.json({ success: true, data: result })
    
  } catch (error) {
    console.error('AI 분석 에러:', error)
    return NextResponse.json(
      { error: '분석 중 문제가 생겼어요. 잠시 후 다시 시도해주세요!' },
      { status: 500 }
    )
  }
}
```

**2. 프론트엔드에서 호출**

```typescript
const handleSubmit = async (text: string) => {
  setLoading(true)
  setError(null)
  
  try {
    const response = await fetch('/api/analyze', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ text })
    })
    
    if (!response.ok) {
      throw new Error('분석 실패')
    }
    
    const result = await response.json()
    
    // 결과 저장 (localStorage)
    saveToHistory(result.data)
    
    // 결과 페이지로 이동
    router.push('/result')
    
  } catch (error) {
    setError('분석 중 문제가 생겼어요 😢 다시 시도해주세요!')
  } finally {
    setLoading(false)
  }
}
```

### Phase 4: 데이터 저장 (Day 6)

**localStorage 헬퍼 만들기**

`lib/storage.ts`
```typescript
export interface JournalEntry {
  id: string
  createdAt: string
  text: string
  emotions: { label: string; score: number }[]
  summary: string
  needs: string
  actions: ActionItem[]
}

export const storage = {
  // 저장
  save(entry: JournalEntry) {
    const entries = this.getAll()
    entries.unshift(entry)
    localStorage.setItem('atti-entries', JSON.stringify(entries))
  },
  
  // 전체 조회
  getAll(): JournalEntry[] {
    const data = localStorage.getItem('atti-entries')
    return data ? JSON.parse(data) : []
  },
  
  // 최근 7개
  getRecent(count: number = 7) {
    return this.getAll().slice(0, count)
  },
  
  // ID로 조회
  getById(id: string) {
    return this.getAll().find(e => e.id === id)
  }
}
```

### Phase 5: UI 디자인 (Day 7-8)

**Tailwind로 예쁘게 만들기**

```typescript
// 감정 배지 컴포넌트
export function EmotionBadge({ emotion, score }) {
  return (
    <div className="inline-flex items-center gap-2 px-4 py-2 
                    bg-blue-50 text-blue-700 rounded-full">
      <span className="text-2xl">{emotion.emoji}</span>
      <span className="font-medium">{emotion.label}</span>
      <span className="text-sm">{Math.round(score * 100)}%</span>
    </div>
  )
}

// 음악 카드 컴포넌트
export function MusicCard({ music }) {
  return (
    <div className="p-6 bg-gradient-to-br from-purple-50 to-pink-50 
                    rounded-2xl border border-purple-100 shadow-sm">
      <div className="text-3xl mb-3">🎵</div>
      <h3 className="font-bold text-lg mb-2">
        {music.artist} - "{music.title}"
      </h3>
      <p className="text-sm text-gray-600 mb-3">
        💙 {music.why_recommend}
      </p>
      {music.lyrics_snippet && (
        <p className="text-sm italic text-gray-500 mb-3 pl-4 border-l-2">
          "{music.lyrics_snippet}"
        </p>
      )}
      <p className="text-xs text-gray-400">
        ※ 유튜브, 멜론, 스포티파이 등에서 검색해서 들어보세요
      </p>
    </div>
  )
}
```

---

## 🚀 Vercel 배포 (초간단!)

### 배포 전 체크리스트

**✅ 확인사항**
1. `npm run build` 에러 없이 완료
2. `.env.local`이 `.gitignore`에 있음
3. API 키가 코드에 하드코딩 안 됨
4. 모든 이미지가 `public/` 폴더에 있음

### 배포 단계 (10분)

**Step 1: GitHub에 코드 올리기**

```bash
# .gitignore 확인 (이미 생성되어 있어요)
# .env.local
# node_modules/
# .next/

# Git 초기화
git init
git add .
git commit -m "Initial commit: 아띠 MVP"

# GitHub에 새 레포지토리 만들기
# (github.com에서 New Repository 클릭)

# 레포지토리 연결
git remote add origin https://github.com/[username]/atti-app.git
git branch -M main
git push -u origin main
```

**Step 2: Vercel 계정 만들기**
1. https://vercel.com 접속
2. "Sign Up" 클릭
3. "Continue with GitHub" 선택
4. GitHub 계정 인증

**Step 3: 프로젝트 Import**
1. Vercel 대시보드에서 "Add New..." → "Project" 클릭
2. GitHub 레포지토리 목록에서 `atti-app` 선택
3. "Import" 클릭

**Step 4: 설정 확인**
- Framework Preset: Next.js (자동 감지)
- Root Directory: `./` (기본값)
- Build Command: `npm run build` (자동)
- Output Directory: `.next` (자동)

**Step 5: 환경 변수 추가**
1. "Environment Variables" 섹션 펼치기
2. Name: `OPENAI_API_KEY`
3. Value: `sk-proj-...` (본인의 API 키)
4. "Add" 클릭

**Step 6: Deploy!**
- "Deploy" 버튼 클릭
- 2~3분 기다리기
- ✅ 배포 완료!

**Step 7: 앱 확인**
- 생성된 URL 클릭 (예: `https://atti-app.vercel.app`)
- 모바일에서도 확인
- 친구들에게 공유!

### 배포 후 업데이트 방법

```bash
# 코드 수정 후
git add .
git commit -m "Update: 음악 카탈로그 추가"
git push

# 끝! Vercel이 자동으로 재배포해요 (2분 소요)
```

---

## 🐛 에러 대응 가이드

### 자주 나는 에러 Top 5

**1. "Module not found" 에러**
```bash
# 해결: 패키지 재설치
rm -rf node_modules
npm install
```

**2. "API key not found" 에러**
```bash
# 해결: .env.local 확인
# 파일 이름이 정확한지 체크
# 개발 서버 재시작 (Ctrl+C 후 npm run dev)
```

**3. 빌드 에러 "Type error"**
```bash
# 해결: TypeScript 에러 확인
npm run build
# 에러 메시지 읽고 타입 수정
```

**4. Vercel 배포 실패**
```bash
# 해결: 로컬에서 빌드 테스트
npm run build
npm run start
# 로컬에서 작동하면 Vercel도 작동해요
```

**5. "Cannot read property of undefined"**
```typescript
// 나쁜 코드
const name = user.profile.name // user가 없으면 에러!

// 좋은 코드
const name = user?.profile?.name ?? '알 수 없음'
```

### 디버깅 팁

**콘솔 로그 활용**
```typescript
console.log('현재 상태:', data)
console.log('API 응답:', response)
```

**React DevTools 설치**
- Chrome 확장 프로그램
- 컴포넌트 상태 확인 가능

**에러 바운더리 추가**
```typescript
// app/error.tsx
'use client'

export default function Error({ error, reset }) {
  return (
    <div className="p-8 text-center">
      <h2>앗, 문제가 생겼어요 😅</h2>
      <p>{error.message}</p>
      <button onClick={reset}>다시 시도</button>
    </div>
  )
}
```

---

## 📊 개발 일정 (현실적인 예상)

### 총 소요 시간: 2주 (파트타임 기준)

**Week 1: 기본 구조 & 핵심 기능**
- Day 1-2: 환경 설정 + 기본 화면 3개
- Day 3-4: AI API 연동
- Day 5-6: localStorage 저장
- Day 7: 기본 테스트

**Week 2: UI/UX & 배포**
- Day 8-9: 감정 배지, 액션 카드 디자인
- Day 10: 음악/꽃 카탈로그 작성 (30곡 + 15종)
- Day 11: 에러 처리, 로딩 상태
- Day 12: Vercel 배포
- Day 13-14: 친구 테스트 + 버그 수정

### 풀타임으로 한다면?
- **3-4일 안에 가능해요!**

---

## 🎓 학습 자료 (추천!)

### 필수 튜토리얼

**Next.js 공식 튜토리얼** ⭐⭐⭐⭐⭐
- https://nextjs.org/learn
- 소요 시간: 4시간
- 완전 초보자용, 한국어 번역도 있어요

**Tailwind CSS 공식 문서**
- https://tailwindcss.com/docs
- 필요할 때마다 찾아보면 돼요

**OpenAI API 가이드**
- https://platform.openai.com/docs
- 예제 코드가 많아요

### 유튜브 강의 (한국어)

**"드림코딩 - Next.js 14 완벽 가이드"**
- 무료, 한국어, 실전 예제

**"노마드코더 - Next.js 시작하기"**
- 초보자 친화적

### 커뮤니티

**도움 받을 곳**
- 오픈카톡: "Next.js 한국 사용자 모임"
- 디스코드: Vercel 공식 서버
- GitHub Issues: 문제 발생 시 질문

---

## 💡 개발하면서 명심할 것

### DO ✅
- **작게 시작하세요**: 완벽하지 않아도 괜찮아요
- **자주 커밋하세요**: `git commit`을 습관화
- **에러를 두려워하지 마세요**: 에러는 배움의 기회!
- **공식 문서를 먼저 보세요**: ChatGPT보다 정확해요
- **로컬에서 테스트하세요**: 배포 전 꼭 확인

### DON'T ❌
- **API 키를 코드에 넣지 마세요**: 항상 환경 변수
- **node_modules를 git에 올리지 마세요**: .gitignore 확인
- **한 번에 다 만들려고 하지 마세요**: 단계별로!
- **에러를 무시하지 마세요**: 나중에 더 큰 문제
- **혼자 고민하지 마세요**: 커뮤니티에 물어보세요

---

## 🎯 MVP 완성 기준

### 이것만 되면 배포해도 괜찮아요!

✅ **필수 기능**
- [ ] 일기 작성하고 제출할 수 있어요
- [ ] AI가 감정을 분석해요 (3~5개 라벨 + 강도)
- [ ] 한 줄 요약 + 욕구 해석이 나와요
- [ ] 액션 아이템 3~5개 추천 (음악 포함)
- [ ] 기록을 볼 수 있어요 (History)
- [ ] 위기 신호 감지 → Safety 페이지 안내

✅ **품질 체크**
- [ ] 모바일에서도 잘 보여요
- [ ] 로딩 중 표시가 있어요
- [ ] 에러 발생 시 친절한 메시지
- [ ] 빌드 에러 없음 (`npm run build` 성공)

✅ **배포 체크**
- [ ] Vercel 배포 완료
- [ ] 환경 변수 설정 완료
- [ ] 친구 3명이 테스트해서 작동 확인

---

**초보자도 충분히 만들 수 있어요! 아띠와 함께 화이팅! 💪💙**